.\" Automatically generated by Podwrapper::Man 1.44.1 (Pod::Simple 3.41)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "guestfs-release-notes-1.34 1"
.TH guestfs-release-notes-1.34 1 "2021-04-03" "libguestfs-1.44.1" "Virtualization Support"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "名前"
.IX Header "名前"
guestfs-release-notes \- libguestfs リリースノート
.SH "RELEASE NOTES FOR LIBGUESTFS 1.34"
.IX Header "RELEASE NOTES FOR LIBGUESTFS 1.34"
These release notes only cover the differences from the previous stable/dev
branch split (1.32.0).  For detailed changelogs, please see the git
repository, or the ChangeLog file distributed in the tarball.
.SS "New features"
.IX Subsection "New features"
Multiple performance enhancements were made in libguestfs.  The \*(L"hot cache\*(R"
time to launch to appliance should be under 1 second assuming recent qemu
and kernel are installed.  There are also new utilities for precisely
benchmarking libguestfs (\fIutils/boot\-benchmark\fR and \fIutils/boot\-analysis\fR
in the source tree).
.PP
The virt\-p2v tool for converting physical machines to virtual machines was
substantially improved.  This includes: clearer, coloured output during
conversions, support for Gtk 3, more detailed information about hardware,
click to identify network interfaces, more debugging tools included with the
\&\s-1ISO,\s0 and many bug fixes.
.PP
f2fs (Flash Friendly File System) is now supported (Pino Toscano).
.PP
\fINew tools\fR
.IX Subsection "New tools"
.PP
\&\fBvirt\-p2v\-make\-kiwi\fR\|(1) can be used to build the virt\-p2v \s-1ISO\s0 based on \s-1SLES\s0
and openSUSE, using the kiwi utility (Cédric Bosdonnat).
.PP
\fINew features in existing tools\fR
.IX Subsection "New features in existing tools"
.PP
virt-resize will now preserve the \s-1GPT GUID.\s0  This was required for Windows
Server 2012 R2, where the bootloader would become confused if the \s-1GUID\s0
changed (Maxim Perevedentsev).
.PP
virt-resize will use sparse copying for (old MBR-style) extended
partitions.  This makes resizing of guests that use extended partitions much
faster (Maxim Perevedentsev).
.PP
virt\-p2v kernel command line options can now be used to set defaults for \s-1GUI\s0
configuration.
.PP
The virt\-p2v debugging options have been completely removed, simplifying the
interface and documentation.  Debugging information is now captured fully
automatically.
.PP
virt\-p2v\-make\-disk lets you specify an \fI\-\-arch\fR option, allowing you to
build a 32 bit virt\-p2v, for compatibility with older systems.
.PP
virt\-p2v\-make\-disk no longer requires that you specify an \f(CW\*(C`os\-version\*(C'\fR for
the virt\-p2v disk.  If omitted it will try to choose a suitable
\&\f(CW\*(C`os\-version\*(C'\fR depending on your host system.
.PP
virt\-p2v\-make\-disk and virt\-p2v\-make\-kickstart both gain a new \fI\-\-install\fR
option that allows you to add arbitrary extra packages to the virt\-p2v \s-1ISO,\s0
for customization, additional debugging tools and so on.
.PP
virt\-v2v will now uninstall Parallels Tools (or the equivalent Virtuozzo
Tools) from Linux guests.  Also stop the Windows drivers from loading at
boot.  (Roman Kagan and Pavel Butsykin)
.PP
virt\-v2v \fI\-\-in\-place\fR mode has been enhanced to allow the caller to choose
whether or not to install certain virtio drivers in the guest (Roman Kagan).
.PP
virt\-v2v conversion of Windows guests was substantially rewritten and
simplified (Roman Kagan).
.PP
virt\-v2v \fI\-\-in\-place\fR mode now supports installing virtio-scsi drivers in
guests (Roman Kagan).
.PP
virt\-v2v can now convert \s-1SUSE\s0 guests and \s-1SUSE\s0 guests using \s-1UEFI\s0 (Cédric
Bosdonnat and Jim Fehlig).
.PP
virt\-v2v can now convert guests to Glance that have multiple disks.
Previously it would fail on such guests.
.PP
The virt\-v2v \fI\-\-no\-trim\fR and \fI\-\-vmtype\fR options are now no-ops.  They will
print a warning but are otherwise ignored.  virt\-v2v can now generate the
\&\s-1OVF\s0 vmtype correctly without user intervention.
.PP
virt\-v2v has now been tested against \s-1SUSE\s0 Xen as a source hypervisor (Cédric
Bosdonnat).
.PP
virt\-v2v adds support for \s-1SUSE VMDP\s0 drivers (Cédric Bosdonnat).
.PP
virt\-v2v can convert \s-1OVA\s0 files containing subfolders, as produced by \s-1SUSE\s0
Studio (Cédric Bosdonnat).
.PP
virt\-v2v sets the \s-1OVF\s0 \f(CW\*(C`<Origin>\*(C'\fR element correctly.  oVirt has been
extended to support more source hypervisors (Shahar Havivi).
.PP
virt\-v2v now supports Windows Server 2016 (Tomáš Golembiovský).
.PP
The virt-builder \fI\-\-list\fR option can now be used to show all templates or a
single template (Pino Toscano).
.PP
All OCaml-based tools now use \fBgetopt_long\fR\|(3) for option parsing, and
\&\fI\-\-help\fR output has been improved (Pino Toscano).
.PP
virt-builder and virt-customize \fI\-\-selinux\-relabel\fR option can now fully
relabel the guest filesystem at build time, without requiring a lengthy
autorelabel at first boot.
.PP
virt-customize \fI\-\-delete\fR now accepts globs.
.PP
New virt-customize \fI\-\-uninstall\fR option lets you uninstall packages.
.PP
virt-customize can now use \f(CW\*(C`pvvxsvc\*(C'\fR as an alternative to \f(CW\*(C`rhsrvany\*(C'\fR for
running firstboot scripts in Windows guests (Cédric Bosdonnat).
.PP
virt-customize now uses the strongest hashing scheme for passwords on Arch
and Void Linux (Pino Toscano).
.PP
virt-customize \fI\-\-install\fR now works correctly on Arch (Pino Toscano).
.PP
virt-inspector has new options \fI\-\-no\-applications\fR and \fI\-\-no\-icon\fR to
prevent the list of applications and icon from being included in the \s-1XML\s0
output (Pino Toscano).
.PP
New virt-sysprep \fI\-\-network\fR option has been added, allowing you to
actually use the \fI\-\-install\fR etc options which were present in virt-sysprep
before but did not usually work.  Note that the network is still disabled by
default.
.PP
virt-sysprep \f(CW\*(C`fs\-uuids\*(C'\fR operation no longer fails on btrfs guests (Maxim
Perevedentsev).
.PP
virt-dib can output Docker images (Pino Toscano).
.PP
virt-dib has a new \fI\-\-drive\-format\fR option to allow the user to specify the
format of the helper drive (Pino Toscano).
.PP
All OCaml virt tools now have a \fI\-\-colors\fR/\fI\-\-colours\fR option which
enables coloured output (using \s-1ANSI\s0 escape sequences) even if the output is
not a tty.  The default is to check if the output is a tty and disable
coloured output if not.  This allows coloured output to be consumed by other
tools.
.PP
\fILanguage bindings\fR
.IX Subsection "Language bindings"
.PP
\&\s-1PHP\s0 test coverage has been enhanced (Pino Toscano).
.PP
\&\s-1PHP 7\s0 is now supported (Pino Toscano).
.PP
Python bindings are now compliant with \s-1PEP 8\s0 (Pino Toscano).
.PP
A Python pip package is available in
http://libguestfs.org/download/python/
.PP
The Ruby bindings now print the full exception if one is thrown by the event
callback.  Note this is still incorrect behaviour as event callbacks should
not throw exceptions, but it aids debugging.
.PP
All OCaml libraries and programs are now compiled with \fI\-safe\-string\fR, if
supported by the OCaml compiler.
.PP
\fIInspection\fR
.IX Subsection "Inspection"
.PP
Alpine Linux using busybox can now be inspected.  Also the \s-1APK\s0 package
manager is supported in virt-customize (Pino Toscano).
.PP
We now handle inspection of Mageia 4 (Pino Toscano).
.PP
Void Linux and the Void Linux xbps package manager are fully supported (Pino
Toscano).
.PP
Parsing of CoreOS version information has been enhanced (Pino Toscano).
.PP
It is now possible to get an icon from \s-1ALT\s0 Linux (Pino Toscano).
.PP
\&\s-1PLD\s0 Linux versions < 3 are now recognized (Pino Toscano).
.PP
Windows drive letters are now returned for guests using \s-1GPT\s0 partitions
(Dawid Zamirski).
.PP
We can now correctly inspect Unix guests that do not have an \fI/etc/fstab\fR
file (Pino Toscano).
.PP
Added another source for the Ubuntu icon which doesn't rely on \s-1GNOME\s0 having
been installed in the guest.
.PP
We can now get an icon for Windows 7 64 bit guests.
.PP
Libosinfo integration was rewritten to deal with the new database format
used by osinfo (Pino Toscano).
.PP
\fIDocumentation\fR
.IX Subsection "Documentation"
.PP
New manual page \fBguestfs\-building\fR\|(1) describes how to build libguestfs
from source.
.PP
The man pages, tools and tool \fI\-\-help\fR output is now automatically checked
to ensure that all tool options are properly documented, that warning
sections are included where necessary, and that every page has a description
section.
.PP
The \fBguestfs\-testing\fR\|(1) man page has been refreshed and based on a newer
libguestfs.
.PP
\fIArchitectures and platforms\fR
.IX Subsection "Architectures and platforms"
.PP
virt-customize now works on \s-1POWER7\s0 and \s-1POWER8\s0 platforms, both big endian and
little endian (Xianghua Chen and Hu Zhang).
.SS "Security"
.IX Subsection "Security"
See also \fBguestfs\-security\fR\|(1).
.PP
\fI\s-1CVE\-2015\-8869\s0\fR
.IX Subsection "CVE-2015-8869"
.PP
https://bugzilla.redhat.com/CVE\-2015\-8869
.PP
This vulnerability in OCaml might affect virt tools written in the OCaml
programming language.  It affects only 64 bit platforms.  Because this bug
affects code generation it is difficult to predict which precise software
could be affected, and therefore our recommendation is that you recompile
libguestfs using a version of the OCaml compiler where this bug has been
fixed (or ask your Linux distro to do the same).
.PP
\fIvirt-customize ownership of \fI.ssh\fI, \fI.ssh/authorized_keys\fI\fR
.IX Subsection "virt-customize ownership of .ssh, .ssh/authorized_keys"
.PP
https://bugzilla.redhat.com/1337561
.PP
Previously when virt-customize injected an \s-1SSH\s0 key into a guest, when it
created the \fI~/.ssh\fR and \fI~/.ssh/authorized_keys\fR directory and file (in
case they were missing) it created them with owner and group \f(CW\*(C`root.root\*(C'\fR.
This has been fixed so the correct user is used.  This is not thought to
have been exploitable.
.PP
\fIWindows \f(CI\*(C`%systemroot%\*(C'\fI\fR
.IX Subsection "Windows %systemroot%"
.PP
The inspection code has been made more robust against guests which might use
very long \f(CW\*(C`%systemroot%\*(C'\fR (derived from the guest-controlled Windows
Registry).  This is not thought to have been exploitable.
.PP
\fIVirtio-rng is now available in the appliance\fR
.IX Subsection "Virtio-rng is now available in the appliance"
.PP
virtio-rng (the virtual Random Number Generator device) is now passed to the
appliance, which should improve the quality random numbers generated for
GUIDs and cryptographic key generation.
.SS "\s-1API\s0"
.IX Subsection "API"
\fINew APIs\fR
.IX Subsection "New APIs"
.ie n .IP """btrfs_filesystem_show""" 4
.el .IP "\f(CWbtrfs_filesystem_show\fR" 4
.IX Item "btrfs_filesystem_show"
List all devices where a btrfs filesystem is spanned (Pino Toscano).
.ie n .IP """download_blocks""" 4
.el .IP "\f(CWdownload_blocks\fR" 4
.IX Item "download_blocks"
.PD 0
.ie n .IP """download_inode""" 4
.el .IP "\f(CWdownload_inode\fR" 4
.IX Item "download_inode"
.ie n .IP """filesystem_walk""" 4
.el .IP "\f(CWfilesystem_walk\fR" 4
.IX Item "filesystem_walk"
.PD
Download filesystem data blocks from a given partition.  Download arbitrary
files by inode number.  Retrieve all files from a filesystem including
deleted files.
.Sp
Note these require optional dependency The Sleuth Kit.  (Matteo Cafasso)
.ie n .IP """get_sockdir""" 4
.el .IP "\f(CWget_sockdir\fR" 4
.IX Item "get_sockdir"
Read the path where temporary sockets are stored (Pino Toscano).
.ie n .IP """mountable_device""" 4
.el .IP "\f(CWmountable_device\fR" 4
.IX Item "mountable_device"
.PD 0
.ie n .IP """mountable_subvolume""" 4
.el .IP "\f(CWmountable_subvolume\fR" 4
.IX Item "mountable_subvolume"
.PD
Split a Mountable into device name and subvolume (Cédric Bosdonnat).
.ie n .IP """ntfscat_i""" 4
.el .IP "\f(CWntfscat_i\fR" 4
.IX Item "ntfscat_i"
Download \s-1NTFS\s0 file by inode number (Matteo Cafasso).
.ie n .IP """part_expand_gpt""" 4
.el .IP "\f(CWpart_expand_gpt\fR" 4
.IX Item "part_expand_gpt"
Allow in-place expanding of \s-1GPT\s0 partitions by moving the second (backup)
partition table to the end of the disk (Maxim Perevedentsev).
.ie n .IP """part_get_disk_guid""" 4
.el .IP "\f(CWpart_get_disk_guid\fR" 4
.IX Item "part_get_disk_guid"
.PD 0
.ie n .IP """part_set_disk_guid""" 4
.el .IP "\f(CWpart_set_disk_guid\fR" 4
.IX Item "part_set_disk_guid"
.ie n .IP """part_set_disk_guid_random""" 4
.el .IP "\f(CWpart_set_disk_guid_random\fR" 4
.IX Item "part_set_disk_guid_random"
.PD
Get and set the \s-1GPT\s0 disk \s-1GUID,\s0 or set it to a fresh random value (Maxim
Perevedentsev).
.ie n .IP """selinux_relabel""" 4
.el .IP "\f(CWselinux_relabel\fR" 4
.IX Item "selinux_relabel"
SELinux-relabel part or all of the guest filesystem.
.PP
\fIOther \s-1API\s0 changes\fR
.IX Subsection "Other API changes"
.PP
\&\f(CW\*(C`guestfs_set_selinux\*(C'\fR, \f(CW\*(C`guestfs_get_selinux\*(C'\fR, \f(CW\*(C`guestfs_setcon\*(C'\fR,
\&\f(CW\*(C`guestfs_getcon\*(C'\fR and \f(CW\*(C`guestfs_llz\*(C'\fR have been deprecated.  Use the new \s-1API\s0
\&\f(CW\*(C`guestfs_selinux_relabel\*(C'\fR to relabel filesystems.  Use
\&\f(CW\*(C`guestfs_lgetxattrs\*(C'\fR to list the \f(CW\*(C`security.selinux\*(C'\fR extended attributes of
existing files.
.PP
\&\f(CW\*(C`guestfs_vfs_minimum_size\*(C'\fR can now be used on dirty filesystems (Maxim
Perevedentsev).
.PP
\&\f(CW\*(C`guestfs_ll\*(C'\fR now works on paths which contain absolute symlinks (Pino
Toscano).
.PP
\&\f(CW\*(C`guestfs_glob_expand\*(C'\fR now has an optional \f(CW\*(C`directoryslash\*(C'\fR boolean
parameter which controls whether trailing slashes are returned for directory
names (Pino Toscano).
.PP
\&\f(CW\*(C`guestfs_lvs\*(C'\fR will no longer return LVs which have the \f(CW\*(C`activationskip\*(C'\fR
flag set.  The reason is that such LVs have no \f(CW\*(C`/dev/VG/LV\*(C'\fR device node and
so code which read the list of LVs and then probed the devices themselves
would immediately fail.  You can use \f(CW\*(C`guestfs_lvs_full\*(C'\fR if you want to read
all LVs.  (Pino Toscano).
.PP
\&\f(CW\*(C`guestfs_list_disk_labels\*(C'\fR now no longer fails if no disks with labels were
added.  Instead it now returns an empty list (Pino Toscano).
.PP
\&\f(CW\*(C`guestfs_is_lv\*(C'\fR no longer fails if passed a btrfs subvolume, it returns
false instead (Maxim Perevedentsev).
.SS "Build changes"
.IX Subsection "Build changes"
qemu ≥ 1.3.0 is required.
.PP
yajl (a \s-1JSON\s0 parsing library) is required to build libguestfs.
.PP
You can now build with \s-1GCC 6.\s0
.PP
\&\f(CW\*(C`make check\-valgrind\*(C'\fR now has substantially better coverage.
.PP
\&\f(CW\*(C`make check\-slow\*(C'\fR now works again.
.PP
Use \f(CW\*(C`make \-C appliance clean\-supermin\-appliance\*(C'\fR to clean the supermin
appliance (it will be rebuilt on next \f(CW\*(C`make\*(C'\fR).
.PP
There are a variety of new rules for running virt\-p2v from the source
directory: \f(CW\*(C`make \-C p2v run\-virt\-p2v\-directly\*(C'\fR | \f(CW\*(C`run\-virt\-p2v\-in\-a\-vm\*(C'\fR |
\&\f(CW\*(C`run\-virt\-p2v\-non\-gui\-conversion\*(C'\fR.  These are documented further in
\&\fBguestfs\-hacking\fR\|(1).
.PP
virt\-p2v may be built using either Gtk 2 or Gtk 3.  To force a particular
version of Gtk to be used, \f(CW\*(C`./configure \-\-with\-gtk=2|3\*(C'\fR
.PP
The \f(CW\*(C`./configure\*(C'\fR options are now mostly documented in
\&\fBguestfs\-building\fR\|(1).
.SS "内部"
.IX Subsection "内部"
In git, versions are now tagged with \f(CW\*(C`v1.XX.YY\*(C'\fR (previously they were
tagged with \f(CW\*(C`1.XX.YY\*(C'\fR).  Using the \f(CW\*(C`v\-\*(C'\fR prefix is more common in git
repositories.
.PP
When using the libvirt backend, we now wait for qemu to exit gracefully
instead of killing it after 15 seconds.  This helps when writing to slow
devices (especially cheap \s-1USB\s0 keys).
.PP
Error messages from libvirt now include the \f(CW\*(C`err\->int1\*(C'\fR field which
usually contains the \f(CW\*(C`errno\*(C'\fR.
.PP
On \s-1ARM,\s0 all \s-1DTB\s0 (device tree) code has been removed.  qemu creates the right
device tree on the fly, we do not need to specify one.
.PP
The C \s-1API\s0 tests now use larger test disks, allowing \s-1BTRFS\s0 to be tested
properly (Pino Toscano).
.PP
The tests should now work on a pure Python 3 host (Pino Toscano).
.PP
In C bindings, internal functions are now (mostly) consistently named
\&\f(CW\*(C`guestfs_int_*\*(C'\fR whereas previously there was no consistent scheme.
.PP
The old \f(CW\*(C`safe_malloc\*(C'\fR etc functions are now no longer exported by the
library, nor used in language bindings.
.PP
Setting \s-1TMPDIR\s0 to a path longer than ~ 100 characters will no longer cause
libguestfs to fail silently and randomly when creating Unix domain sockets
(Pino Toscano).
.PP
The \f(CW\*(C`COMPILE_REGEXP\*(C'\fR macro can now be used in the daemon.
.PP
When tracing, results containing structs are now printed in full (Pino
Toscano).
.PP
The Perl \f(CW\*(C`Sys::Guestfs\*(C'\fR module now no longer embeds an incrementing \s-1API\s0
\&\*(L"version number\*(R".  This module is now always at phony version \*(L"1.0\*(R".  To
find the real version of libguestfs from Perl you must call
\&\f(CW\*(C`$g\->version\*(C'\fR.
.PP
All code is compiled with \f(CW\*(C`\-Wstack\-usage=10000\*(C'\fR and multiple changes have
been made to remove stack allocation of large strings and buffers.
.PP
The \fBerror\fR\|(3) function is now used everywhere, replacing most previous
uses of \fBperror\fR\|(3) + \fBexit\fR\|(3), and \fBfprintf\fR\|(3) + exit.
.PP
In C code, \f(CW\*(C`/**\*(C'\fR comments are turned into documentation which is
automatically added to the \fBguestfs\-hacking\fR\|(1) manual page.
.PP
A safe \*(L"getumask\*(R" function has been added.  For recent Linux kernels this
uses the newly added \f(CW\*(C`Umask\*(C'\fR field in \fI/proc/self/status\fR.  For older
Linux and other Unix, this uses a thread-safe technique involving \fBfork\fR\|(2)
(thanks: Josh Stone, Jiri Jaburek, Eric Blake).
.PP
Safe \fBposix_fadvise\fR\|(2) wrappers have been added, and more hints have been
added to the code which may make a minor difference to performance.
.PP
A safe wrapper around \fBwaitpid\fR\|(2) has been added which handles \f(CW\*(C`INTR\*(C'\fR
properly.
.PP
\&\f(CW\*(C`podwrapper.pl\*(C'\fR (used to generate the manual pages) now stops if any \s-1POD\s0
error is found.  A new script called \f(CW\*(C`podcheck.pl\*(C'\fR does cross-checking of
\&\fI\-\-help\fR output, tool options and manual pages.
.PP
All version numbers in the library (eg. versions of qemu, versions of
libvirt, versions of guest operating systems) are unified in a single file
\&\fIsrc/version.c\fR (Pino Toscano).
.PP
On Windows guests, virt-customize will use the vendor-neutral path
\&\f(CW\*(C`C:\eProgram Files\eGuestfs\eFirstboot\*(C'\fR to store firstboot scripts.
Previously it used \f(CW\*(C`C:\eProgram Files\eRed Hat\eFirstboot\*(C'\fR.  This change
should be invisible to the scripts themselves.  (Cédric Bosdonnat)
.PP
On Linux guests, the firstboot services generated by virt-builder
\&\fI\-\-firstboot\fR etc have been renamed to \f(CW\*(C`guestfs\-firstboot\*(C'\fR (Pino Toscano).
.PP
There is now a common \f(CW\*(C`debug\*(C'\fR function used by all OCaml tools, replacing
previous code which did \f(CW\*(C`if verbose () then printf ...\*(C'\fR.
.PP
virt\-p2v copies files it needs over to the virt\-v2v conversion server using
\&\fBscp\fR\|(1), instead of trying to send them via the shell session.  This
should improve reliability and should be a completely transparent to end
users.
.PP
All code in \fImllib\fR is now built into a single \f(CW\*(C`mllib.cma\*(C'\fR or
\&\f(CW\*(C`mllib.cmxa\*(C'\fR library.  All code in \fIcustomize\fR is now built into a single
\&\f(CW\*(C`customize.cma\*(C'\fR or \f(CW\*(C`customize.cmxa\*(C'\fR library.  This simplifies the build of
the OCaml tools.
.PP
\&\fBlvmetad\fR\|(8) is now used in the appliance when available (Pino Toscano).
.PP
\&\*(L"Silent rules\*(R" are used for OCaml, Java, Erlang and \s-1POD.\s0  Use \f(CW\*(C`make V=1\*(C'\fR to
see the full command lines again (Pino Toscano).
.SS "バグ修正"
.IX Subsection "バグ修正"
.IP "https://bugzilla.redhat.com/1364347" 4
.IX Item "https://bugzilla.redhat.com/1364347"
virt-sparsify \-\-in\-place failed with \s-1UEFI\s0 system
.IP "https://bugzilla.redhat.com/1362357" 4
.IX Item "https://bugzilla.redhat.com/1362357"
run_command runs exit handlers when execve fails (e.g. due to missing
executable)
.IP "https://bugzilla.redhat.com/1362354" 4
.IX Item "https://bugzilla.redhat.com/1362354"
virt-dib failed to create image using \s-1DIB_YUM_REPO_CONF\s0
.IP "https://bugzilla.redhat.com/1359652" 4
.IX Item "https://bugzilla.redhat.com/1359652"
Fail to inspect Windows \s-1ISO\s0 file
.IP "https://bugzilla.redhat.com/1358142" 4
.IX Item "https://bugzilla.redhat.com/1358142"
Some info will show when convert guest to libvirt by virt\-v2v with parameter
\&\-\-quiet
.IP "https://bugzilla.redhat.com/1354335" 4
.IX Item "https://bugzilla.redhat.com/1354335"
overlay of disk images does not specify the format of the backing file
.IP "https://bugzilla.redhat.com/1352761" 4
.IX Item "https://bugzilla.redhat.com/1352761"
Virt-manager can't show \s-1OS\s0 icons of win7/win8/ubuntu guest.
.IP "https://bugzilla.redhat.com/1350363" 4
.IX Item "https://bugzilla.redhat.com/1350363"
Improve error info \*(L"remote server timeout unexpectedly waiting for password
prompt\*(R" when connect to a bogus server at p2v client
.IP "https://bugzilla.redhat.com/1348900" 4
.IX Item "https://bugzilla.redhat.com/1348900"
virt\-p2v should update error prompt when 'Test connection' with a
non-existing user in conversion server
.IP "https://bugzilla.redhat.com/1345813" 4
.IX Item "https://bugzilla.redhat.com/1345813"
virt-sysprep \-\-install always failed to install the packages specified
.IP "https://bugzilla.redhat.com/1345809" 4
.IX Item "https://bugzilla.redhat.com/1345809"
virt-customize \-\-truncate\-recursive should give an error message when
specifying a no-existing path
.IP "https://bugzilla.redhat.com/1343423" 4
.IX Item "https://bugzilla.redhat.com/1343423"
[\s-1RFE\s0]Should give a better description about 'curl error 22' when failed
using ssh identity http url at p2v client
.IP "https://bugzilla.redhat.com/1343414" 4
.IX Item "https://bugzilla.redhat.com/1343414"
Failed \s-1SSH\s0 to conversion server by ssh identity http url at p2v client
.IP "https://bugzilla.redhat.com/1343375" 4
.IX Item "https://bugzilla.redhat.com/1343375"
[\s-1RFE\s0] uninstall packages inside the \s-1VM\s0
.IP "https://bugzilla.redhat.com/1342447" 4
.IX Item "https://bugzilla.redhat.com/1342447"
Ifconfig command is not supported on p2v client
.IP "https://bugzilla.redhat.com/1342398" 4
.IX Item "https://bugzilla.redhat.com/1342398"
Convert a guest from \s-1RHEL\s0 by virt\-v2v but its origin info shows \s-1RHEV\s0 at
rhevm
.IP "https://bugzilla.redhat.com/1342337" 4
.IX Item "https://bugzilla.redhat.com/1342337"
Should remind a warning about disk image has a partition when using
virt\-p2v\-make\-disk
.IP "https://bugzilla.redhat.com/1341984" 4
.IX Item "https://bugzilla.redhat.com/1341984"
virt-get-kernel prompts an 'invalid value' error when using \-\-format auto
.IP "https://bugzilla.redhat.com/1341564" 4
.IX Item "https://bugzilla.redhat.com/1341564"
virt\-p2v spinner should be hidden when it stops spinning
.IP "https://bugzilla.redhat.com/1340809" 4
.IX Item "https://bugzilla.redhat.com/1340809"
Testing connection timeout when input regular user of conversion server with
checked \*(L"use sudo......\*(R"button
.IP "https://bugzilla.redhat.com/1340464" 4
.IX Item "https://bugzilla.redhat.com/1340464"
[\s-1RFE\s0] Suggestion give user a reminder for \*(L"Cancel conversion\*(R" button
.IP "https://bugzilla.redhat.com/1340407" 4
.IX Item "https://bugzilla.redhat.com/1340407"
Multiple network ports will not be aligned at p2v client
.IP "https://bugzilla.redhat.com/1338083" 4
.IX Item "https://bugzilla.redhat.com/1338083"
Update \s-1UEFI\s0 whitelist for official fedora packages
.IP "https://bugzilla.redhat.com/1337561" 4
.IX Item "https://bugzilla.redhat.com/1337561"
virt-customize \-\-ssh\-inject not applying correct file permission
.IP "https://bugzilla.redhat.com/1335671" 4
.IX Item "https://bugzilla.redhat.com/1335671"
extra quotes around \s-1UUID\s0 confuses findfs in \s-1RHEL\s0 (but not in Fedora)
.IP "https://bugzilla.redhat.com/1332025" 4
.IX Item "https://bugzilla.redhat.com/1332025"
Inspection does not parse /etc/redhat\-release containing \*(L"Derived from Red
Hat Enterprise Linux 7.1 (Source)\*(R"
.IP "https://bugzilla.redhat.com/1327488" 4
.IX Item "https://bugzilla.redhat.com/1327488"
\&\s-1RFE:\s0 Allow p2v kernel options without p2v.server to set defaults
.IP "https://bugzilla.redhat.com/1325825" 4
.IX Item "https://bugzilla.redhat.com/1325825"
virt\-v2v should prevent using multiple '\-b' and '\-n' option appears on the
command line
.IP "https://bugzilla.redhat.com/1321620" 4
.IX Item "https://bugzilla.redhat.com/1321620"
libguestfs: error: could not parse integer in version number: 7"
.IP "https://bugzilla.redhat.com/1321338" 4
.IX Item "https://bugzilla.redhat.com/1321338"
[1.33.16] Compilation Error: Unbound value List.sort_uniq in v2v.ml line
988, characters 10\-24:
.IP "https://bugzilla.redhat.com/1317843" 4
.IX Item "https://bugzilla.redhat.com/1317843"
`virt\-builder \-\-update` fails with: \*(L"dnf \-y \-\-best upgrade: command exited
with an error\*(R"
.IP "https://bugzilla.redhat.com/1316479" 4
.IX Item "https://bugzilla.redhat.com/1316479"
v2v cmd cannot exit and \*(L"block I/O error in device 'appliance': No space
left on device (28)\*(R" is printed when specified \*(L"\-v \-x\*(R"
.IP "https://bugzilla.redhat.com/1316041" 4
.IX Item "https://bugzilla.redhat.com/1316041"
virt-rescue fails, but missing error message
.IP "https://bugzilla.redhat.com/1314244" 4
.IX Item "https://bugzilla.redhat.com/1314244"
\&\s-1RFE:\s0 virt\-p2v log window should process colour escapes and backspaces
.IP "https://bugzilla.redhat.com/1312254" 4
.IX Item "https://bugzilla.redhat.com/1312254"
virt\-v2v \-o libvirt doesn't preserve or use correct <graphics
type=\*(L"vnc|spice\*(R">
.IP "https://bugzilla.redhat.com/1309706" 4
.IX Item "https://bugzilla.redhat.com/1309706"
error: internal error: Invalid floppy device name: hdb
.IP "https://bugzilla.redhat.com/1309619" 4
.IX Item "https://bugzilla.redhat.com/1309619"
Wrong warning info \*(L"use standard \s-1VGA\*(R"\s0 shows when converting windows > 7 by
virt\-v2v
.IP "https://bugzilla.redhat.com/1309580" 4
.IX Item "https://bugzilla.redhat.com/1309580"
\&\s-1OS\s0 name of win8.1 x64 guest shows incorrect in rhevm3.6 general info
.IP "https://bugzilla.redhat.com/1308769" 4
.IX Item "https://bugzilla.redhat.com/1308769"
virt\-v2v does not copy additional disks to Glance
.IP "https://bugzilla.redhat.com/1306666" 4
.IX Item "https://bugzilla.redhat.com/1306666"
Failure when disk contains an \s-1LV\s0 with activationskip=y
.IP "https://bugzilla.redhat.com/1296606" 4
.IX Item "https://bugzilla.redhat.com/1296606"
virt\-v2v doesn't remove VirtualBox additions correctly because of file
quoting
.IP "https://bugzilla.redhat.com/1293527" 4
.IX Item "https://bugzilla.redhat.com/1293527"
There should be a reminder to avoid user to edit a guest image by multiple
tools at the same time in guestfish man page
.IP "https://bugzilla.redhat.com/1293276" 4
.IX Item "https://bugzilla.redhat.com/1293276"
guestfish can not ll a symbolic link dir or edit a file in it
.IP "https://bugzilla.redhat.com/1278878" 4
.IX Item "https://bugzilla.redhat.com/1278878"
guestfish should be able to handle \s-1LVM\s0 thin layouts
.IP "https://bugzilla.redhat.com/1264835" 4
.IX Item "https://bugzilla.redhat.com/1264835"
ppc64le: virt-customize \-\-install fail to detect the guest arch
.IP "https://bugzilla.redhat.com/1264332" 4
.IX Item "https://bugzilla.redhat.com/1264332"
Test that trimming in virt\-v2v doesn't regress
.IP "https://bugzilla.redhat.com/1232192" 4
.IX Item "https://bugzilla.redhat.com/1232192"
Virt\-v2v gives an error on a blank disk: part_get_parttype: unknown
signature, of the output: \s-1BYT\s0;
.IP "https://bugzilla.redhat.com/1229386" 4
.IX Item "https://bugzilla.redhat.com/1229386"
virt\-p2v in non-GUI mode doesn't show any conversion progress or status
.IP "https://bugzilla.redhat.com/1227599" 4
.IX Item "https://bugzilla.redhat.com/1227599"
P2V invalid password prints unexpected end of file waiting for command
prompt.
.IP "https://bugzilla.redhat.com/1224795" 4
.IX Item "https://bugzilla.redhat.com/1224795"
On Ubuntu, virt-builder \-\-install and \-\-update cannot use the network
.IP "https://bugzilla.redhat.com/1213324" 4
.IX Item "https://bugzilla.redhat.com/1213324"
virt\-v2v: warning: unknown guest operating system: windows windows 6.3 when
converting win8,win8.1,win2012,win2012R2,win10 to rhev
.IP "https://bugzilla.redhat.com/1203898" 4
.IX Item "https://bugzilla.redhat.com/1203898"
Support inspecting docker images without /etc/fstab
.IP "https://bugzilla.redhat.com/1186935" 4
.IX Item "https://bugzilla.redhat.com/1186935"
libguestfs cannot inspect recent Fedora / \s-1RHEL\s0 >= 7 when /usr is a separate
partition
.IP "https://bugzilla.redhat.com/1167916" 4
.IX Item "https://bugzilla.redhat.com/1167916"
P2V: invalid conversion server prints unexpected end of file waiting for
password prompt.
.IP "https://bugzilla.redhat.com/1152825" 4
.IX Item "https://bugzilla.redhat.com/1152825"
virt-rescue \-\-selinux can not work well, when enable selinux in the command
line the value of 'getenforce' is still Disabled in virt-rescue appliance
.IP "https://bugzilla.redhat.com/1150298" 4
.IX Item "https://bugzilla.redhat.com/1150298"
\&\s-1ARM 32\s0 bit on Ubuntu: warning: cast to pointer from integer of different
size [\-Wint\-to\-pointer\-cast]
.IP "https://bugzilla.redhat.com/1089100" 4
.IX Item "https://bugzilla.redhat.com/1089100"
NetworkManager avc unlink denied for resolv.conf after using
\&\-\-selinux\-relabel
.IP "https://bugzilla.redhat.com/983969" 4
.IX Item "https://bugzilla.redhat.com/983969"
\&\s-1RFE:\s0 virt-sysprep should be SELinux-aware
.IP "https://bugzilla.redhat.com/855058" 4
.IX Item "https://bugzilla.redhat.com/855058"
\&\s-1RFE:\s0 virt\-p2v: display more information about storage devices
.IP "https://bugzilla.redhat.com/554829" 4
.IX Item "https://bugzilla.redhat.com/554829"
SELinux handling could be done better.
.SH "関連項目"
.IX Header "関連項目"
\&\fBguestfs\-examples\fR\|(1), \fBguestfs\-faq\fR\|(1), \fBguestfs\-performance\fR\|(1),
\&\fBguestfs\-recipes\fR\|(1), \fBguestfs\-testing\fR\|(1), \fBguestfs\fR\|(3),
\&\fBguestfish\fR\|(1), http://libguestfs.org/
.SH "著者"
.IX Header "著者"
Richard W.M. Jones
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (C) 2009\-2020 Red Hat Inc.
.SH "LICENSE"
.IX Header "LICENSE"
.SH "BUGS"
.IX Header "BUGS"
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools
.PP
To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools
.PP
When reporting a bug, please supply:
.IP "\(bu" 4
The version of libguestfs.
.IP "\(bu" 4
Where you got libguestfs (eg. which Linux distro, compiled from source, etc)
.IP "\(bu" 4
Describe the bug accurately and give a way to reproduce it.
.IP "\(bu" 4
Run \fBlibguestfs\-test\-tool\fR\|(1) and paste the \fBcomplete, unedited\fR
output into the bug report.
